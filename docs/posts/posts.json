[
  {
    "path": "posts/2021-12-01-eds-222-final-project-species-density-sst/",
    "title": "EDS 222 Final Project - Species Density ~ SST",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Cullen Molitor",
        "url": {}
      }
    ],
    "date": "2021-12-01",
    "categories": [],
    "contents": "\r\nMotivation\r\nMotivate your question. Why is this important? Is there existing evidence on this question? If so, why is it inconclusive? If not, why not?\r\nCalifornia’s Northern Channel Islands sit at the transition between two biogeographic provinces, the cold-water North Pacific and the warmer Gulf of California to the south. San Miguel and Santa Rosa Islands have species representative of the colder North Pacific province while Anacapa and Santa Barbara Islands sit firmly in the warmer Gulf of California province. Santa Cruz Island lies in the transition zone with the western end of the island favoring North Pacific species and the eastern end favoring Gulf of California species. This makes the Northern Channel Islands a unique place to study how species distributions respond to ocean temperatures.\r\nThe water temperatures of the Southern California Bight (SCB) and the Channel Islands are influenced by the El Niño Southern Oscillation (ENSO). ENSO to sea surface temperatures (SST) from.\r\nThe impetus of this analysis is to investigate which species are sensitive to either warm-water or cold-water events. Using a series of dynamic linear model with lag independent variables (SST anomalies)\r\nData\r\nDescribe your data. Where did you access it? What are its spatial and temporal features? What are its limitations? What do you know about the sampling strategy and what biases that may introduce? If helpful, you can use a histogram, scatterplot, or summary statistics table to describe your data.\r\nThe Kelp Forest Monitoring (KFM) program at Channel Islands National Park has been collecting abundance and size distribution data of more than 150 species for nearly 40 years (sampled annually) of 37 sites at the five Islands in the National Park.\r\nUsing species density, we can see the trends observed over multiple El Niño (warm-water) and La Niña (cold-water) events. Using a dynamic linear model with lag independent variables we can see the effect of sea surface temperature anomalies during and in the years following these events. recruitment of certain species either increases or decreases.\r\nClearly describe your analysis plan. What is your analysis plan? Why did you choose this analysis, given your data and question? What are the limitations?\r\nSummarize your results visually and in words. Show us your results in figure(s) and/or table(s) that are carefully labeled and captioned. Describe in the text (and orally when presenting) what you found, and how these results either do or do not help you answer your question.\r\nWhat might you do next? One short analysis cannot fully answer an interesting scientific question. If you had time to collect more data or conduct more analysis, what would help you answer this question better?\r\nLook at distribution of cumulative effects (maybe overlay significant effects)\r\n\r\n\r\ndensity <- arrow::read_feather(\"Density.feather\") %>%\r\n  dplyr::filter(Classification != \"Fish\",\r\n                !CommonName %in% c(\"wakame, adult\", \"wakame, juvenile\", \"white abalone\")) %>% \r\n  dplyr::left_join(oni_yearly)\r\n\r\n\r\n\r\n\r\n\r\nResults_lag <- density %>% \r\n  dplyr::group_by(ScientificName) %>% \r\n  dplyr::summarise(\r\n    generics::tidy(\r\n      stats::lm(\r\n        Mean_Density ~ SST_Anom + SST_Anom_1 + SST_Anom_2 + SST_Anom_3 + SST_Anom_4 + SST_Anom_5\r\n        ))) %>% \r\n  # tidyr::drop_na(p.value) %>%\r\n  dplyr::filter(term != \"(Intercept)\") %>% \r\n  dplyr::mutate(significant = ifelse(p.value <= .05, \"yes\", \"no\"))\r\n\r\nResults_filtered <- Results_lag %>%\r\n  dplyr::filter(p.value <= .05) %>% \r\n  dplyr::arrange(estimate) %>%\r\n  # dplyr::arrange(p.value) %>%\r\n  dplyr::mutate(statistic = round(statistic, 3),\r\n                p.value = round(p.value, 3),\r\n                p.value = ifelse(p.value < 0.001, \"< 0.001\", as.character(p.value))) \r\n\r\n\r\n\r\n\r\n\r\nprop <- Results_lag %>% \r\n  group_by(ScientificName) %>%\r\n  summarise(est_sum =  sum(estimate)) \r\n  \r\n\r\ntotal <- length(Results_lag$ScientificName)\r\nwarm <- Results_lag %>%\r\n  filter(estimate > 0) %>% \r\n  # distinct(CommonName) %>% \r\n  pull(ScientificName) %>% \r\n  length()\r\ncold <- Results_lag %>%\r\n  filter(estimate < 0) %>% \r\n  # distinct(CommonName) %>% \r\n  pull(ScientificName) %>% \r\n  length()\r\n\r\n\r\n\r\n\r\n\r\nggplot(data = prop, aes(x = est_sum)) +\r\n  geom_density() +\r\n  xlim(c(-2, 2))\r\n\r\n\r\n\r\n\r\n\r\n\r\n# for (sp in unique(Results_filtered$CommonName)) {\r\n#   p <- density %>% \r\n#     filter(CommonName == sp) %>% \r\n#     ggplot(aes(y = Mean_Density)) +\r\n#     # geom_point() +\r\n#     geom_smooth(aes(x = SST_Anom), se = F, method = lm, formula = \"y~x\",color = \"red\") +\r\n#     geom_smooth(aes(x = SST_Anom_1), se = F, method = lm, formula = \"y~x\", color = \"blue\") +\r\n#     geom_smooth(aes(x = SST_Anom_2), se = F, method = lm, formula = \"y~x\", color = \"green\") +\r\n#     geom_smooth(aes(x = SST_Anom_3), se = F, method = lm, formula = \"y~x\", color = \"black\") +\r\n#     geom_smooth(aes(x = SST_Anom_4), se = F, method = lm, formula = \"y~x\", color = \"purple\") +\r\n#     labs(title = sp) +\r\n#     theme_classic()\r\n#   \r\n#   print(p)\r\n# }\r\n\r\n\r\n\r\n\r\n\r\n# for (sp in unique(Results_filtered$CommonName)) {\r\n#   p <- Results_lag %>% \r\n#     filter(CommonName == sp) %>% \r\n#     ggplot() +\r\n#     geom_line(aes(x = term, y = estimate, color = CommonName, group = CommonName), show.legend = F) +\r\n#     geom_point(aes(x = term, y = estimate, shape = significant), size = 4) +\r\n#     labs(title = sp) +\r\n#     theme_classic()\r\n#   \r\n#   print(p)\r\n# }\r\n\r\n\r\n\r\nLiterature Cited\r\nCostello, M.J., Tsai, P., Wong, P.S. et al. Marine biogeographic realms and species endemicity. Nat Commun 8, 1057 (2017). https://doi.org/10.1038/s41467-017-01121-2\r\nRyan Freidman\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-12-01-eds-222-final-project-species-density-sst/eds-222-final-project-species-density-sst_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2021-12-01T11:49:12-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-08-16-tidy-data/",
    "title": "Tidy Data",
    "description": "Some concepts and functions around `Tidy` data",
    "author": [
      {
        "name": "Cullen Molitor",
        "url": {}
      }
    ],
    "date": "2021-08-16",
    "categories": [],
    "contents": "\r\nToday we introduced the tidy data concept where each column is a variable, each row is an observation, and each cell is a unique value. This format gives us a standardized way to quickly munge our data. The tidyverse suite of packages are designed to use messy raw data to create tidy data, through a standard set of arguments and syntax in the provided functions. pivot_longer() is a function to take wide format data and return long format tidy data.\r\nHere is a wide format dataset\r\n\r\n\r\nknitr::kable(dplyr::slice(mtcars, 1:10))\r\n\r\n\r\n\r\nmpg\r\ncyl\r\ndisp\r\nhp\r\ndrat\r\nwt\r\nqsec\r\nvs\r\nam\r\ngear\r\ncarb\r\nMazda RX4\r\n21.0\r\n6\r\n160.0\r\n110\r\n3.90\r\n2.620\r\n16.46\r\n0\r\n1\r\n4\r\n4\r\nMazda RX4 Wag\r\n21.0\r\n6\r\n160.0\r\n110\r\n3.90\r\n2.875\r\n17.02\r\n0\r\n1\r\n4\r\n4\r\nDatsun 710\r\n22.8\r\n4\r\n108.0\r\n93\r\n3.85\r\n2.320\r\n18.61\r\n1\r\n1\r\n4\r\n1\r\nHornet 4 Drive\r\n21.4\r\n6\r\n258.0\r\n110\r\n3.08\r\n3.215\r\n19.44\r\n1\r\n0\r\n3\r\n1\r\nHornet Sportabout\r\n18.7\r\n8\r\n360.0\r\n175\r\n3.15\r\n3.440\r\n17.02\r\n0\r\n0\r\n3\r\n2\r\nValiant\r\n18.1\r\n6\r\n225.0\r\n105\r\n2.76\r\n3.460\r\n20.22\r\n1\r\n0\r\n3\r\n1\r\nDuster 360\r\n14.3\r\n8\r\n360.0\r\n245\r\n3.21\r\n3.570\r\n15.84\r\n0\r\n0\r\n3\r\n4\r\nMerc 240D\r\n24.4\r\n4\r\n146.7\r\n62\r\n3.69\r\n3.190\r\n20.00\r\n1\r\n0\r\n4\r\n2\r\nMerc 230\r\n22.8\r\n4\r\n140.8\r\n95\r\n3.92\r\n3.150\r\n22.90\r\n1\r\n0\r\n4\r\n2\r\nMerc 280\r\n19.2\r\n6\r\n167.6\r\n123\r\n3.92\r\n3.440\r\n18.30\r\n1\r\n0\r\n4\r\n4\r\n\r\nthat we then make it into a long format dataset with pivot_longer()\r\n\r\n\r\ncars_long <- mtcars |> \r\n  tibble::rownames_to_column(\"car\") |> \r\n  tidyr::pivot_longer(-1, names_to = 'var', values_to = 'value') |> \r\n  dplyr::slice(1:10)\r\nknitr::kable(cars_long)\r\n\r\n\r\ncar\r\nvar\r\nvalue\r\nMazda RX4\r\nmpg\r\n21.00\r\nMazda RX4\r\ncyl\r\n6.00\r\nMazda RX4\r\ndisp\r\n160.00\r\nMazda RX4\r\nhp\r\n110.00\r\nMazda RX4\r\ndrat\r\n3.90\r\nMazda RX4\r\nwt\r\n2.62\r\nMazda RX4\r\nqsec\r\n16.46\r\nMazda RX4\r\nvs\r\n0.00\r\nMazda RX4\r\nam\r\n1.00\r\nMazda RX4\r\ngear\r\n4.00\r\n\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-08-16T16:48:47-07:00",
    "input_file": {}
  }
]
